#!/usr/bin/env bash
NIX_HOME=$HOME/.nix-profile/nix-home

function link_recursively() {
	files=$(ls $1)
	for file in $files
	do
		dottedFile=$(echo $file | sed -e "s/^_/./")
		if [ -d $1/$file ]
		then
			mkdir -p $2/$dottedFile
			link_recursively "$1/$file" "$2/$dottedFile"
		else
			ln -f -s $1/$file $2/$dottedFile
		fi
	done
}

link_recursively $NIX_HOME $HOME
